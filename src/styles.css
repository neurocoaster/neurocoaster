* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
body { background: linear-gradient(135deg, #0a0a2a 0%, #1a1a4a 50%, #0a0a2a 100%); color: #fff; min-height: 100vh; overflow-x: hidden; }
#game-container { width: 100%; max-width: 1600px; margin: 0 auto; padding: 20px; }

/* Game Header */
.game-header { text-align: center; margin-bottom: 25px; padding: 25px; background: linear-gradient(135deg, rgba(0, 50, 100, 0.9), rgba(50, 0, 100, 0.9)); border-radius: 20px; border: 6px solid #00aaff; box-shadow: 0 0 40px rgba(0, 170, 255, 0.6); position: relative; overflow: hidden; }
h1 { color: #00ffff; font-size: 3.5em; text-shadow: 0 0 25px #00aaff; margin-bottom: 10px; letter-spacing: 2px; }
.subtitle { color: #ffaa00; font-size: 1.2em; margin-bottom: 20px; font-style: italic; }

/* Mode Selection */
.mode-selection { display: flex; justify-content: center; gap: 30px; margin-top: 30px; flex-wrap: wrap; }
.mode-btn { padding: 20px 40px; font-size: 1.2em; background: linear-gradient(135deg, #0066aa, #004488); border: 3px solid #00aaff; border-radius: 15px; color: white; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 15px; min-width: 250px; justify-content: center; }
.mode-btn:hover { background: linear-gradient(135deg, #0077bb, #005599); transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0, 170, 255, 0.4); }

/* Main Board */
#game-board { display: block; }
.board-game-layout { display: grid; grid-template-columns: 3fr 2fr; gap: 30px; margin-bottom: 30px; min-height: 600px; }

/* Track */
#action-potential-track { position: relative; background: rgba(0, 10, 25, 0.95); border-radius: 25px; border: 6px solid #00aaff; overflow: hidden; box-shadow: 0 0 50px rgba(0, 170, 255, 0.4); height: 600px; }
#apCanvas { width: 100%; height: 100%; display: block; }
#players-on-track { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }

/* Phase Indicators */
.phase-indicators { position: absolute; top: 20px; left: 20px; right: 20px; display: flex; justify-content: space-between; gap: 10px; }
.phase-indicator { background: rgba(0, 20, 40, 0.9); padding: 10px 15px; border-radius: 10px; border: 2px solid; display: flex; align-items: center; gap: 10px; min-width: 120px; backdrop-filter: blur(5px); font-size: 0.9em; font-weight: bold; transition: all 0.3s; }
.phase-indicator.active { transform: scale(1.1); box-shadow: 0 0 20px; }

/* Player Stage Display */
.player-stage-display { position: absolute; top: 80px; left: 20px; right: 20px; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
.player-stage { background: rgba(0, 20, 40, 0.9); padding: 15px; border-radius: 15px; border: 3px solid; display: flex; flex-direction: column; align-items: center; gap: 10px; min-width: 140px; backdrop-filter: blur(5px); }
.stage-character { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em; border: 3px solid white; transition: all 0.3s; }
.stage-label { font-size: 0.9em; font-weight: bold; text-align: center; }
.stage-voltage { font-size: 0.8em; color: #aaaaff; }

/* Progress Section */
#progress-section { position: absolute; bottom: 20px; left: 20px; right: 20px; background: rgba(0, 20, 40, 0.9); padding: 15px; border-radius: 15px; border: 3px solid #ff5500; backdrop-filter: blur(5px); }
.progress-label { color: #ffaa00; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; font-size: 1.1em; }
.progress-bar { height: 20px; background: rgba(255, 85, 0, 0.3); border-radius: 10px; overflow: hidden; margin-bottom: 10px; }
.progress-fill { height: 100%; background: linear-gradient(90deg, #ff5500, #ffaa00); border-radius: 10px; width: 0%; transition: width 0.5s ease; }
.progress-details { display: flex; justify-content: space-between; margin-top: 10px; }
.detail-item { display: flex; align-items: center; gap: 8px; color: #aaaaff; font-size: 0.9em; }

/* Right Panel */
.game-board-panel { display: flex; flex-direction: column; gap: 25px; }

/* Active Player Section */
#active-player-section { background: linear-gradient(135deg, rgba(0, 40, 80, 0.95), rgba(20, 0, 60, 0.95)); border-radius: 20px; padding: 25px; border: 4px solid #ff55aa; }
.active-player-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.active-player-avatar { width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5em; border: 4px solid white; box-shadow: 0 0 20px; transition: all 0.3s; }
.active-player-name { color: #ffffff; margin-bottom: 5px; font-size: 1.4em; }
.active-player-stage { color: #aaaaff; font-size: 0.9em; display: flex; align-items: center; gap: 5px; }
.player-score { text-align: right; }
.score-value { color: #ffaa00; font-size: 2.2em; font-weight: bold; text-shadow: 0 0 10px rgba(255, 170, 0, 0.5); }
.score-label { color: #aaaaff; font-size: 0.9em; }

/* Player Stats */
.player-stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
.player-stat { background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 10px; border: 2px solid; text-align: center; transition: all 0.3s; }
.stat-icon { font-size: 1.3em; margin-bottom: 8px; }
.stat-label { font-size: 0.8em; color: #cccccc; margin-bottom: 5px; }
.stat-value { color: white; font-size: 1.6em; font-weight: bold; }

/* Question Card */
#question-card { background: linear-gradient(135deg, rgba(40, 20, 60, 0.95), rgba(60, 0, 40, 0.95)); border-radius: 20px; padding: 25px; border: 4px solid #aa55ff; flex: 1; display: flex; flex-direction: column; }
.question-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px; }
.question-header h3 { color: #ffffff; font-size: 1.2em; display: flex; align-items: center; gap: 10px; }
#question-topic { background: rgba(255, 170, 0, 0.3); padding: 8px 15px; border-radius: 25px; font-size: 0.9em; color: #ffaa00; border: 1px solid #ffaa00; }
.difficulty-badge { background: rgba(0, 170, 255, 0.3); padding: 5px 12px; border-radius: 20px; font-size: 0.8em; color: #00aaff; border: 1px solid #00aaff; display: flex; align-items: center; gap: 5px; }
.question-body { flex: 1; display: flex; align-items: center; }
#question-text { font-size: 1.3em; line-height: 1.5; color: #ffffff; text-align: center; width: 100%; padding: 20px; background: rgba(0, 0, 0, 0.2); border-radius: 15px; border: 2px solid rgba(255, 255, 255, 0.1); }

/* Answers Grid */
#answers-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
.answer-btn { padding: 15px; background: linear-gradient(135deg, #2a2a6a, #1a1a4a); border: 3px solid #5555ff; border-radius: 15px; color: #ffffff; cursor: pointer; transition: all 0.3s; text-align: left; font-size: 1em; display: flex; align-items: center; gap: 10px; min-height: 70px; }
.answer-btn:hover:not(.disabled) { background: linear-gradient(135deg, #3a3a8a, #2a2a6a); border-color: #00aaff; transform: translateY(-3px); }
.answer-btn.correct { background: linear-gradient(135deg, #00aa00, #008800); border-color: #00ff00; }
.answer-btn.wrong { background: linear-gradient(135deg, #aa0000, #880000); border-color: #ff0000; }
.answer-btn.disabled { opacity: 0.7; cursor: not-allowed; transform: none !important; }

/* Action Buttons */
#action-buttons { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
.action-btn { padding: 15px; background: linear-gradient(135deg, #0066aa, #004488); border: 3px solid #00aaff; border-radius: 15px; color: white; cursor: pointer; font-size: 1em; display: flex; align-items: center; justify-content: center; gap: 10px; transition: all 0.3s; }
.action-btn:hover { background: linear-gradient(135deg, #0077bb, #005599); transform: translateY(-3px); }

/* Turn Indicator */
.turn-indicator { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #ff55aa, #aa55ff); padding: 15px 30px; border-radius: 50px; border: 3px solid white; z-index: 500; display: none; align-items: center; gap: 15px; box-shadow: 0 0 30px rgba(255, 85, 170, 0.5); }
.turn-player-color { width: 30px; height: 30px; border-radius: 50%; border: 2px solid white; }
.turn-text { font-weight: bold; font-size: 1.1em; color: white; }

/* Stage Progress Animation */
.stage-progress-animation { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.9); padding: 30px; border-radius: 20px; border: 5px solid; z-index: 1000; display: none; text-align: center; min-width: 400px; box-shadow: 0 0 50px; }
.stage-transition-icon { font-size: 4em; margin-bottom: 20px; animation: pulse 1s infinite; }
.stage-transition-title { font-size: 2em; margin-bottom: 10px; font-weight: bold; }
.stage-transition-desc { font-size: 1.2em; margin-bottom: 20px; color: #cccccc; }

/* Achievement Popup */
.achievement-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: linear-gradient(135deg, rgba(255, 170, 0, 0.95), rgba(255, 85, 0, 0.95)); padding: 30px; border-radius: 20px; border: 5px solid #ffff00; z-index: 1000; display: none; text-align: center; min-width: 350px; box-shadow: 0 0 50px rgba(255, 255, 0, 0.5); }
.achievement-icon { font-size: 3em; color: #ffffff; margin-bottom: 15px; }
.achievement-title { color: #ffffff; font-size: 1.8em; margin-bottom: 10px; }
.achievement-desc { color: #fff8e1; font-size: 1.1em; margin-bottom: 20px; line-height: 1.4; }
.continue-btn { padding: 12px 25px; background: linear-gradient(135deg, #0066aa, #004488); border: 3px solid #00aaff; border-radius: 10px; color: white; cursor: pointer; font-size: 1em; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; margin: 0 auto; }

@media (max-width: 1200px) {
  .board-game-layout { grid-template-columns: 1fr; }
  #action-potential-track { height: 400px; }
  .player-stage-display { display: none; }
}
@media (max-width: 768px) {
  h1 { font-size: 2.5em; }
  #answers-grid { grid-template-columns: 1fr; }
  #action-buttons { grid-template-columns: 1fr; }
  .player-stats-grid { grid-template-columns: 1fr; }
  .achievement-popup, .stage-progress-animation { min-width: 300px; padding: 20px; }
  .phase-indicators { flex-wrap: wrap; justify-content: center; }
}

/* Extra animations that original JS injected dynamically */
@keyframes gentle-pulse { 0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(1.05);opacity:.8} }
@keyframes vibrate { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-2px)} 75%{transform:translateX(2px)} }
@keyframes pulse-fire { 0%,100%{transform:scale(1);filter:brightness(1)} 50%{transform:scale(1.1);filter:brightness(1.5)} }
@keyframes cooling { 0%,100%{transform:scale(1);filter:hue-rotate(0deg)} 50%{transform:scale(0.95);filter:hue-rotate(30deg)} }
@keyframes spark { 0%,100%{transform:translateX(-50%) translateY(0);opacity:0} 50%{transform:translateX(-50%) translateY(-10px);opacity:1} }
@keyframes rotate { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
@keyframes pulse { 0%{transform:scale(1)} 50%{transform:scale(1.1)} 100%{transform:scale(1)} }
